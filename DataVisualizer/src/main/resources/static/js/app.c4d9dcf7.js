(function(e){function t(t){for(var n,l,o=t[0],r=t[1],c=t[2],h=0,d=[];h<o.length;h++)l=o[h],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&d.push(i[l][0]),i[l]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,o=1;o<a.length;o++){var r=a[o];0!==i[r]&&(n=!1)}n&&(s.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},i={app:0},s=[];function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=r;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},1:function(e,t){},"48ae":function(e,t,a){"use strict";a("fd8c")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Charts",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},s=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal"}},[a("el-menu-item",{attrs:{index:"1"},on:{click:function(t){return e.changeCharts("pi")}}},[e._v("饼图")]),a("el-menu-item",{attrs:{index:"2"},on:{click:function(t){return e.changeCharts("line")}}},[e._v("折线图")]),a("el-menu-item",{attrs:{index:"3"},on:{click:function(t){return e.changeCharts("map")}}},[e._v("地理图")])],1)],1),a("el-main",[a("br"),a("el-row",[a("el-col",{attrs:{span:5}},[e._v(" 距今时间： "),a("el-select",{staticStyle:{width:"50%"},attrs:{id:"dateSelection",disabled:e.disable_n_day,placeholder:"请选择数据距今的时间"},on:{change:this.changeNDays},model:{value:e.shown_days,callback:function(t){e.shown_days=t},expression:"shown_days"}},e._l(e.date,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:5}},[e._v(" 数据来源： "),a("el-select",{staticStyle:{width:"40%"},attrs:{id:"sourceSelection",disabled:e.disable_n_day,placeholder:"请选择数据来源"},on:{change:this.changeDataSource},model:{value:e.shown_data,callback:function(t){e.shown_data=t},expression:"shown_data"}},e._l(e.dataSource,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:5}},[a("div",{attrs:{id:"Countries"}},[e._v(" 国家数量： "),a("el-input",{staticStyle:{width:"40%"},attrs:{disabled:e.disable_input,type:"number",oninput:"value=value.replace(/[^\\d]/g,'')",placeholder:"输入想查看的国家数量"},on:{change:this.changeCountries},model:{value:e.select_n_countries,callback:function(t){e.select_n_countries=t},expression:"select_n_countries"}})],1)])],1),a("p"),a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:24}},[a("el-card",{staticStyle:{height:"70vh"},attrs:{id:"card"}},[a("div",{staticClass:"chart-container"},[a("div",{staticStyle:{width:"100%",height:"65vh",margin:"0 auto"},attrs:{id:"main"}})]),a("br")])],1)],1)],1)],1)},o=[],r=(a("e9c4"),a("99af"),a("d81d"),a("ac1f"),a("1276"),a("5319"),a("b0c0"),{data:function(){return{activeIndex:"1",shown_days:"一周",shown_data:"JHU",chart_state:"bing",select_n_countries:10,select_data_source:"JHU",select_n_days:7,select_fig:"pi",disable_input:!1,disable_n_day:!1,dataSource:[{value:"JHU",label:"JHU"},{value:"WHO",label:"WHO"}],basicDate:[{value:1,label:"昨天"},{value:3,label:"近3天"},{value:7,label:"一周"},{value:14,label:"近14天"},{value:30,label:"近一个月"},{value:60,label:"近两个月"},{value:365,label:"近一年"}],date:[{value:1,label:"昨天"},{value:3,label:"近3天"},{value:7,label:"一周"},{value:14,label:"近14天"},{value:30,label:"近一个月"},{value:60,label:"近两个月"},{value:365,label:"近一年"}],mainCharts:"",value:""}},name:"Chart",methods:{changeShown_DataSource:function(e){this.select_data_source=e,this.shown_data=e},changeShown_N_Days:function(e){this.select_n_days=e;for(var t=0;t<this.date.length;t++)this.date[t].value===this.select_n_days&&(this.shown_days=this.date[t].label)},changeCountries:function(e){this.select_n_countries=parseInt(e),this.buildCharts(this.select_fig)},changeDataSource:function(e){this.changeShown_DataSource(e),this.buildCharts(this.select_fig)},changeNDays:function(e){this.changeShown_N_Days(e),this.buildCharts(this.select_fig)},changeCharts:function(e){this.select_fig=e,"pi"===e?(this.activeIndex="1",this.date=JSON.parse(JSON.stringify(this.basicDate)),this.dataSource=[{value:"JHU",label:"JHU"},{value:"WHO",label:"WHO"}],this.disable_input=!1,this.disable_n_day=!1,console.log(this.date),this.changeShown_N_Days(this.date[2].value),this.changeShown_DataSource(this.dataSource[0].value)):"line"===e?(this.activeIndex="2",this.date=[{value:"2020",label:"2020年"}],this.dataSource=[{value:"JHU",label:"JHU"},{value:"WHO",label:"WHO"}],this.disable_input=!1,this.disable_n_day=!1,this.changeShown_N_Days(this.date[0].value),this.changeShown_DataSource(this.dataSource[0].value)):(this.activeIndex="3",this.date=[{value:1,label:"昨天"}],this.dataSource=[{value:"腾讯",label:"腾讯"}],this.disable_input=!0,this.disable_n_day=!0,this.changeShown_N_Days(this.date[0].value),this.changeShown_DataSource(this.dataSource[0].value)),this.buildCharts(e)},buildCharts:function(e){this.$forceUpdate(),"pi"===e?this.piCharts():"line"===e?this.lineCharts():this.mapChart()},lineCharts:function(){var e=this;this.$axios({method:"get",url:"api/lineRace",params:{source:this.select_data_source,n:this.select_n_countries}}).then((function(t){t=t.data,e.$echarts.init(document.getElementById("main")).dispose(),e.mainCharts=e.$echarts.init(document.getElementById("main"));var a=t.legendData,n=a,i=[],s=[];e.$echarts.util.each(n,(function(e){var t="dataset_"+e;i.push({id:t,fromDatasetId:"dataset_raw",transform:{type:"filter",config:{and:[{dimension:"Country","=":e}]}}}),s.push({type:"line",datasetId:t,showSymbol:!1,name:e,endLabel:{show:!0,formatter:function(e){return e.value[0]}},labelLayout:{moveOverlap:"shiftY"},emphasis:{focus:"series"},encode:{x:"Month",y:"Cases",label:["Country","Cases"],itemName:"Month",tooltip:["Cases"]}})}));var l={animationDuration:5e3,animation:"auto",animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1,stateAnimation:{duration:300,easing:"cubicOut"},dataset:[{id:"dataset_raw",source:t.source}].concat(i),title:{text:"2020年至今全球疫情增长曲线",left:"center"},tooltip:{order:"valueDesc",trigger:"axis"},xAxis:{type:"category",nameLocation:"middle"},yAxis:{name:"确诊病例"},grid:{right:140},toolbox:{show:!0,left:"left",top:"top",feature:{dataView:{readOnly:!0},restore:{},saveAsImage:{}}},series:s};e.mainCharts.setOption(l)})).catch((function(e){console.log(e)}))},piCharts:function(){var e=this;this.$axios({method:"get",url:"api/pieChart",params:{source:this.select_data_source,nDays:this.select_n_days,n:this.select_n_countries}}).then((function(t){t=t.data,e.$echarts.init(document.getElementById("main")).dispose(),e.mainCharts=e.$echarts.init(document.getElementById("main"));var a={title:{text:e.shown_days+"全球新冠肺炎新增确诊病例",subtext:"数据来源："+e.select_data_source,left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{type:"scroll",orient:"vertical",right:10,top:20,bottom:20,data:t.legendData},toolbox:{show:!0,left:"left",top:"top",feature:{dataView:{readOnly:!0},restore:{},saveAsImage:{}}},series:[{name:"国家名",type:"pie",radius:"55%",center:["40%","50%"],color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#0040c4","#ee2662","#91ac72"],data:t.seriesData,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};e.mainCharts.setOption(a),e.mainCharts.resize()})).catch((function(e){console.log(e)}))},mapChart:function(){var e=this;this.$axios({method:"get",url:"/api/mapChart"}).then((function(t){t=t.data,e.$echarts.init(document.getElementById("main")).dispose(),e.mainCharts=e.$echarts.init(document.getElementById("main")),e.mainCharts.hideLoading(),e.$echarts.registerMap("China",t.map);var a={title:{text:"昨日国内新增确诊数",subtext:"数据来源：腾讯新闻",sublink:"https://news.qq.com/",left:"right"},tooltip:{trigger:"item",showDelay:0,transitionDuration:.2,formatter:function(e){var t=(e.value+"").split("."),a=t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,");return e.seriesName+"<br/>"+e.name+": "+a}},visualMap:{left:"right",min:0,max:t.max,inRange:{color:["#ffffff","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]},text:["High","Low"],calculable:!0},toolbox:{show:!0,left:"left",top:"top",feature:{dataView:{readOnly:!0},restore:{},saveAsImage:{}}},series:[{name:"现有确诊量",type:"map",roam:!0,map:"China",emphasis:{label:{show:!0}},data:t.seriesData}]};e.mainCharts.setOption(a)})).catch((function(e){console.log(e)}))}},mounted:function(){var e=this;window.onresize=function(){e.mainCharts.resize()},this.changeCharts("pi")}}),c=r,u=(a("48ae"),a("2877")),h=Object(u["a"])(c,l,o,!1,null,"cc057fda",null),d=h.exports,f={name:"App",components:{Charts:d}},p=f,m=(a("034f"),Object(u["a"])(p,i,s,!1,null,null,null)),b=m.exports,v=a("5c96"),_=a.n(v),g=(a("0fae"),a("313e")),y=a("bc3a"),w=a.n(y),C=a("4328"),S=a.n(C);n["default"].prototype.$axios=w.a,n["default"].prototype.$qs=S.a,n["default"].prototype.$echarts=g,n["default"].use(_.a),n["default"].config.productionTip=!1,document.title="COVID-19 Visualizer by ZZY&HZC",new n["default"]({render:function(e){return e(b)}}).$mount("#app")},"85ec":function(e,t,a){},fd8c:function(e,t,a){}});
//# sourceMappingURL=app.c4d9dcf7.js.map